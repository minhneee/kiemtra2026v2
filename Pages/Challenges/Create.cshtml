@page
@using Microsoft.AspNetCore.Authorization
@attribute [Authorize]
@model PickleballClubManagement.Pages.Challenges.CreateModel
@{
    ViewData["Title"] = "T·∫°o K√®o M·ªõi";
}

<div class="page-header">
    <h1 class="page-title">‚öîÔ∏è T·∫°o Th√°ch ƒê·∫•u M·ªõi</h1>
</div>

<div class="auth-container" style="max-width: 800px;">
    <div class="card">
        <form method="post">
            <div asp-validation-summary="ModelOnly" class="alert alert-error"></div>
            
            <div class="form-group">
                <label class="form-label">Lo·∫°i Th√°ch ƒê·∫•u</label>
                <div style="display: flex; gap: 1rem; margin-bottom: 1rem;">
                    <label class="radio-card" style="flex: 1; cursor: pointer;">
                        <input type="radio" asp-for="Input.Type" value="0" checked onchange="toggleAdvancedFields(false)" style="display: none;" />
                        <div class="card-content" style="padding: 1rem; border: 2px solid #eee; border-radius: 8px; text-align: center;">
                            <span style="font-size: 2rem;">ü•ä</span>
                            <h3>Th√°ch ƒê·∫•u ƒê∆°n (Duel)</h3>
                            <p class="text-muted">T√¨m ƒë·ªëi th·ªß 1vs1 ho·∫∑c 2vs2 nhanh ch√≥ng</p>
                        </div>
                    </label>
                    <label class="radio-card" style="flex: 1; cursor: pointer;">
                        <input type="radio" asp-for="Input.Type" value="1" onchange="toggleAdvancedFields(true)" style="display: none;" />
                        <div class="card-content" style="padding: 1rem; border: 2px solid #eee; border-radius: 8px; text-align: center;">
                            <span style="font-size: 2rem;">üèÜ</span>
                            <h3>Gi·∫£i ƒê·∫•u Mini (Mini-Game)</h3>
                            <p class="text-muted">T·ªï ch·ª©c gi·∫£i Team Battle ho·∫∑c V√≤ng tr√≤n</p>
                        </div>
                    </label>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label" asp-for="Input.Title">Ti√™u ƒê·ªÅ</label>
                <input class="form-control" asp-for="Input.Title" placeholder="V√≠ d·ª•: K√®o 500k, Ch·∫•p n·ª≠a tr√°i..." />
                <span asp-validation-for="Input.Title" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label class="form-label" asp-for="Input.Description">M√¥ T·∫£ / Lu·∫≠t Ch∆°i</label>
                <textarea class="form-control" asp-for="Input.Description" rows="4" placeholder="Chi ti·∫øt v·ªÅ k√®o ƒë·∫•u, th·ªùi gian, ƒë·ªãa ƒëi·ªÉm..."></textarea>
                <span asp-validation-for="Input.Description" class="text-danger"></span>
            </div>

            <!-- Advanced Fields (Hidden by default) -->
            <div id="advancedFields" style="display: none; padding: 1.5rem; background: var(--color-gray-50); border-radius: 12px; margin-bottom: 1.5rem;">
                <h4 style="margin-top: 0; margin-bottom: 1rem;">C·∫•u H√¨nh Gi·∫£i ƒê·∫•u</h4>
                
                <div class="form-group">
                    <label class="form-label">Th·ªÉ Th·ª©c</label>
                    <select class="form-control" asp-for="Input.GameMode">
                        <option value="1">‚öîÔ∏è Team Battle (Phe A vs Phe B)</option>
                        <option value="2">üîÑ Round Robin (V√≤ng Tr√≤n)</option>
                    </select>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div class="form-group">
                        <label class="form-label">Ph√≠ Tham Gia (Entry Fee)</label>
                        <input class="form-control" asp-for="Input.EntryFee" type="number" step="1000" min="0" />
                    </div>
                    <div class="form-group">
                        <label class="form-label">T·ªïng Qu·ªπ Th∆∞·ªüng (Prize Pool)</label>
                        <input class="form-control" asp-for="Input.PrizePool" type="number" step="1000" min="0" />
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">S·ªë Tr·∫≠n Th·∫Øng ƒê·ªÉ V√¥ ƒê·ªãch (Cho Team Battle)</label>
                    <input class="form-control" asp-for="Input.TargetWins" type="number" value="3" min="1" max="10" />
                </div>
            </div>

            <div style="display: flex; gap: 1rem; justify-content: flex-end;">
                <a href="/Challenges" class="btn btn-outline">H·ªßy</a>
                <button type="submit" class="btn btn-primary">üöÄ T·∫°o K√®o</button>
            </div>
        </form>
    </div>
</div>

<style>
    input[type="radio"]:checked + .card-content {
        border-color: var(--color-primary) !important;
        background-color: rgba(0, 168, 107, 0.05);
        box-shadow: 0 4px 12px rgba(0, 168, 107, 0.2);
    }
</style>

<script>
    function toggleAdvancedFields(show) {
        var fields = document.getElementById('advancedFields');
        if (show) {
            fields.style.display = 'block';
        } else {
            fields.style.display = 'none';
        }
    }
</script>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
